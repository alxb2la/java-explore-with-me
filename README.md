# Рейтинг событий (Rating Events)


Реализована дополнительная функциональность - лайки/дизлайки, рейтинг мероприятий.
Авторизованный пользователь может как поставить свою оценку событию, так и удалить (отменить) ее.
Можно получить свою оценку события, получить рейтинг события (по кол-ву лайков),
получить список лучших рейтингов событий с пагинацией.

Ссылка на Pull request: https://github.com/alxb2la/java-explore-with-me/pull/3

---

### Примеры эндпоинтов

**Private:**
- `POST /users/{userId}/events/{eventId}/rating` — добавить оценку
- `DELETE /users/{userId}/events/{eventId}/rating` — удалить оценку
- `GET /users/{userId}/events/{eventId}/rating` — получить оценку


**Public:**
- `GET /events/{eventId}/rating` — получить рейтинг события (по кол-ву лайков)
- `GET /events/rating/top` — получить список лучших рейтингов событий

---

### Валидация, SQL

- **Сущность Rating**:
    - `id`: Long
    - `rated`: Boolean (like — true, dislike — false)
    - `created`: LocalDateTime
    - `evaluator`: User
    - `event`: Event

    
- **Валидация**:
    - Проверки существования в приложении пользователей, событий
    - Пользователь может добавить только одну оценку на конкретное событие.
    - Допускается оценка своих же событий.

---

#### SQL

```sql

    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    rated BOOLEAN NOT NULL,
    created_date_time TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    evaluator_id BIGINT NOT NULL,
    event_id BIGINT NOT NULL,
    CONSTRAINT pk_ratings PRIMARY KEY (id),
    CONSTRAINT fk_ratings_users FOREIGN KEY (evaluator_id) REFERENCES users (id) ON DELETE CASCADE,
    CONSTRAINT fk_ratings_events FOREIGN KEY (event_id) REFERENCES events (id) ON DELETE CASCADE

```


### Пример запроса на добавление оценки

**POST /users/3/events/2/rating**

**Запрос:**
```json
{
  "rated": true
}
```

**Ответ:**
```json
{
  "id": 1,
  "rated": true,
  "created": "2025-07-28 15:23:33",
  "evaluatorId": 3,
  "eventId": 2
}
```
